<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚´ ì£¼ì°¨ í˜„í™© ëŒ€ì‹œë³´ë“œ</title>
    <style>
        :root { --primary: #007bff; --bg: #f4f4f9; }
        body { font-family: 'Pretendard', sans-serif; background: var(--bg); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); width: 100%; max-width: 400px; }
        h1 { text-align: center; color: #333; margin-bottom: 1.5rem; font-size: 1.5rem; }
        .form-group { margin-bottom: 1rem; }
        label { display: block; margin-bottom: 0.5rem; font-weight: bold; color: #555; }
        input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 1rem; }
        .btn { width: 100%; padding: 12px; border: none; border-radius: 6px; font-size: 1rem; cursor: pointer; transition: 0.2s; margin-top: 10px; }
        .btn-link { background-color: var(--primary); color: white; }
        .btn-link:hover { background-color: #0056b3; }
        .result-box { margin-top: 20px; padding: 15px; background: #e9ecef; border-radius: 8px; }
        .result-item { display: flex; justify-content: space-between; margin-bottom: 8px; }
        .highlight { font-weight: bold; color: var(--primary); }
        .warning { color: #dc3545; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸš— ì£¼ì°¨ ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ</h1>

    <div class="form-group">
        <label for="empNo">ì‚¬ë²ˆ (Employee No)</label>
        <input type="number" id="empNo" value="31633" placeholder="ì‚¬ë²ˆ ì…ë ¥">
    </div>

    <button class="btn btn-link" onclick="openParkingSite()">
        ğŸ”— ë‚´ ì£¼ì°¨ í˜„í™© ë³´ëŸ¬ê°€ê¸°
    </button>

    <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">

    <div class="form-group">
        <label for="usedMinutes">í˜„ì¬ê¹Œì§€ ì‚¬ìš©í•œ ì‹œê°„ (ë¶„)</label>
        <input type="number" id="usedMinutes" placeholder="ì˜ˆ: 1200" oninput="calculate()">
    </div>

    <div class="result-box" id="resultBox" style="display:none;">
        <div class="result-item">
            <span>ë‚¨ì€ ì‹œê°„:</span>
            <span class="highlight" id="remainMin">0ë¶„</span>
        </div>
        <div class="result-item">
            <span>ë‚¨ì€ ì‹œê°„(ì‹œ):</span>
            <span id="remainHour">0ì‹œê°„</span>
        </div>
        <div class="result-item">
            <span>í’€íƒ€ì„ ê°€ëŠ¥ ì¼ìˆ˜:</span>
            <span class="highlight" id="remainDays">0ì¼</span>
        </div>
        <p style="font-size: 0.8rem; color: #666; margin-top: 10px;">
            * í•˜ë£¨ ìµœëŒ€ 540ë¶„(9ì‹œê°„) ê¸°ì¤€
        </p>
    </div>
</div>

<script>
    const MAX_MINUTES = 5400; // ì›” ìµœëŒ€ 5400ë¶„
    const DAILY_MAX = 540;    // ì¼ ìµœëŒ€ 540ë¶„

    // ì˜¤ëŠ˜ ë‚ ì§œ ê¸°ì¤€ìœ¼ë¡œ YYYYMM ìƒì„±
    function getCurrentYYYYMM() {
        const date = new Date();
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        return `${year}${month}`;
    }

    // ì£¼ì°¨ ì‚¬ì´íŠ¸ ìƒˆì°½ìœ¼ë¡œ ì—´ê¸°
    function openParkingSite() {
        const empNo = document.getElementById('empNo').value;
        const dateParam = getCurrentYYYYMM();
        // ì£¼ì†Œ ìƒì„±
        const url = `http://220.73.4.2:8080/view/kbs/regular/ess?empNo=${empNo}&date=${dateParam}`;
        
        // ìƒˆ íƒ­ì—ì„œ ì—´ê¸°
        window.open(url, '_blank');
    }

    // ë‚¨ì€ ì‹œê°„ ê³„ì‚° ë¡œì§
    function calculate() {
        const used = Number(document.getElementById('usedMinutes').value);
        const resultBox = document.getElementById('resultBox');
        
        if (used === 0 && document.getElementById('usedMinutes').value === '') {
            resultBox.style.display = 'none';
            return;
        }

        resultBox.style.display = 'block';
        
        const remain = MAX_MINUTES - used;
        
        // í™”ë©´ í‘œì‹œ ì—…ë°ì´íŠ¸
        document.getElementById('remainMin').innerText = `${remain}ë¶„`;
        document.getElementById('remainMin').className = remain < 0 ? 'warning' : 'highlight';

        document.getElementById('remainHour').innerText = `${(remain / 60).toFixed(1)}ì‹œê°„`;
        
        // í’€íƒ€ì„(9ì‹œê°„) ê¸°ì¤€ ë©°ì¹  ë‚¨ì•˜ëŠ”ì§€
        const daysLeft = (remain / DAILY_MAX).toFixed(1);
        document.getElementById('remainDays').innerText = `${daysLeft}ì¼`;
    }
</script>

</body>
</html>
